flowchart LR
    %% Define nodes and subgraphs
    subgraph TS["Tanium Server"]
        subgraph TS_A2["Ashburn, VA, USA"]
            TS_A2_1["A2PWTANIUMHUB01"]
            TS_A2_2["A2PWTANIUMHUB02"]
            TS_A2_1 <-->|"TCP/17472"| TS_A2_2
        end
    end
    subgraph MS["Tanium Module Server"]
        subgraph MS_P3["Phoenix, AZ, USA"]
            MS_P3_1["P3PWTANIUMMOD01"]
        end
    end
    subgraph ZS["Tanium Zone Server"]
        subgraph ZS_A2["Ashburn, VA, USA"]
            ZS_A2_1["A2PWTANIUMZON01<br/>Internal & External"]
            ZS_A2_2["A2PWTANIUMZON02<br/>Internal Only"]
        end
        subgraph ZS_P3["Phoenix, AZ, USA"]
            ZS_P3_1["P3PWTANIUMZON01<br/>Internal & External"]
            ZS_P3_2["P3PWTANIUMZON02<br/>Internal Only"]
        end
        subgraph ZS_SG2["Singapore, SG"]
            ZS_SG2_1["SG2PWTANIUMZS01<br/>Internal Only"]
        end
        subgraph ZS_CGN["Cologne, DE"]
            ZS_CGN_1["CGN-TAN-ZON001<br/>Internal & External"]
        end
    end
    subgraph ZH["Tanium Zone Server Hub"]
        subgraph ZH_A2["Ashburn, VA, USA"]
            ZH_A2_1["A2PWTANIUMHUB03"]
        end
    end
    subgraph SQL["SQL Server"]
        subgraph SQL_A2["Ashburn, VA, USA"]
            SQL_A2_3[("A2PWTANSOCSQL03")]
            SQL_A2_4[("A2PWTANSOCSQL04")]
            SQL_A2_3 <--> SQL_A2_4
        end
    end
    
    %% Define nodes not part of a subgraph
    %%Title("Tanium Production"):::StyleGoDaddyProd
    TaniumClient["Tanium Client"]
    TaniumConsole["Tanium Console<br/>https://tanium.int.gdcorp.tools"]

    %% Define relationships
    TS_A2 -->|"TCP/17477"| MS_P3
    MS_P3 -->|"TCP/443"| TS_A2
    TS_A2 -->|"TCP/1433<br/>to<br/>A2PWTANSOCSQL03"| SQL_A2_3
    TS_A2 --> ZH_A2
    TS_A2 -->|"TCP/17472"| ZS_A2
    TS_A2 -->|"TCP/17472"| ZS_P3
    TS_A2 -->|"TCP/17472"| ZS_SG2
    ZH_A2 --> ZS_CGN
    TaniumClient -.->|"TCP/17472<br/>Unused"| TS_A2
    TaniumClient -.->|"TCP/17475<br/>Unused"| MS_P3
    TaniumClient -.->|"TCP/17472,17500<br/>EMEA Computers Only"| ZS_CGN
    TaniumClient -.->|"TCP/17472,17500"| ZS_A2
    TaniumClient -.->|"TCP/17472,17500"| ZS_P3
    TaniumClient -.->|"TCP/17472,17500"| ZS_SG2
    TaniumConsole -->|"TCP/443"| TS_A2
    
    %% Add hyperlinks
    click TaniumConsole "https://tanium.int.gdcorp.tools" "Tanium Console (VPN Required)"

    %% Define styles
    classDef StyleGoDaddyProd fill:#E22726,color:#000000,stroke:#FFFFFF,stroke-width:1px;
    classDef StyleGoDaddyProdEMEA fill:#FED317,color:#2F1C4C,stroke:#FADCD9,stroke-width:1px;
    classDef StyleGoDaddyDev fill:#00782E,color:#D8EFEF,stroke:#FFEEA9,stroke-width:1px;

    %% Assign styles
    %%class Title StyleGoDaddyProd;